<!DOCTYPE html>
<html>
<head>
<script>
var c = window.localStorage.getItem("myBat");
if( c !== "true" ){
	window.location.replace('index.html');
}

   </script>
  <title>Rate Us</title>
  <link rel="stylesheet" type="text/css" href="./css/addr.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css">
  
</head>

<body>
  <div class="rating-css">
  <h2 style="text-align:center; color:white; font-family: monospace; font-size: 30px;">Add Your Review Here</h2>
  <div class="form-control">
	<input type="text" id="title" required/>
	<label>Title</label>
</div>
    <div>Rate Our Website from 1 to 10</div>
    <div class="star-icon">
      <input type="radio" name="rating1" id="rating1">
      <label for="rating1" class="fa fa-star"></label>
      <input type="radio" name="rating1" id="rating2">
      <label for="rating2" class="fa fa-star"></label>
      <input type="radio" name="rating1" id="rating3">
      <label for="rating3" class="fa fa-star"></label>
      <input type="radio" name="rating1" id="rating4">
      <label for="rating4" class="fa fa-star"></label>
      <input type="radio" name="rating1" id="rating5">
      <label for="rating5" class="fa fa-star"></label>
      <input type="radio" name="rating1" id="rating6">
      <label for="rating6" class="fa fa-star"></label>
      <input type="radio" name="rating1" id="rating7">
      <label for="rating7" class="fa fa-star"></label>
      <input type="radio" name="rating1" id="rating8">
      <label for="rating8" class="fa fa-star"></label>
      <input type="radio" name="rating1" id="rating9">
      <label for="rating9" class="fa fa-star"></label>
      <input type="radio" name="rating1" id="rating10">
      <label for="rating10" class="fa fa-star"></label>
      <p style="font-size: 20px; position:relative;top:27px;">Description ( The Whole Review )</p>
       <textarea rows="7.5" cols="110" name="comment" id="rev">

</textarea>
<div class="wrapper" style="position:relative; top:50px; margin-left: 230px;" onclick="todo();">
  <a><span>Add Review!</span></a>
</div>
    </div>
  </div>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/2.0.2/anime.js"></script>
      <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" ></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
<script>
function todo(){
	if(document.getElementById('title').value.length >= 4 && document.getElementById('rev').value.length >= 10
	&& rateNum() !== -1){
		postRate(this);
	}
	else{
		if(document.getElementById('title').value.length < 5)
			alert("Enter A Good Title , Too Short !");
		else if((document.getElementById('rev').value.length < 11))
			alert("Enter A Good Description , Too Short !");
		else{
			alert("Please Enter A Rating Between 1 to 10 !");
		}

	}
}
  function rateNum(){
	  var x = 0;
	  var y = 0;
	  if(document.getElementById('rating'+(++x)).checked === true){
		  y = 1;
	  }
	  else if(document.getElementById('rating'+(++x)).checked === true){
		  y = 2;
	  }
	  else if(document.getElementById('rating'+(++x)).checked === true){
		  y = 3;
	  }
	  else if(document.getElementById('rating'+(++x)).checked === true){
		  y = 4;
	  }
	  else if(document.getElementById('rating'+(++x)).checked === true){
		  y = 5;
	  }
	  else if(document.getElementById('rating'+(++x)).checked === true){
		  y = 6;
	  }
	  else if(document.getElementById('rating'+(++x)).checked === true){
		  y = 7;
	  }
	  else if(document.getElementById('rating'+(++x)).checked === true){
		  y = 8;
	  }
	  else if(document.getElementById('rating'+(++x)).checked === true){
		  y = 9;
	  }
	  else if(document.getElementById('rating'+(++x)).checked === true){
		  y = 10;
	  }
	  else{
		  y=-1;
	  }
	  return y;
  }
  function postRate(val){
      var model = {
    	"username": window.localStorage.getItem("myUsr"),
    	"rating": rateNum(),
    	"title" : document.getElementById("title").value,
    	"descripe" : document.getElementById("rev").value,
    	"user_id" : window.localStorage.getItem("myCat")
	};
	console.log("post data:"+model);
 	    $.ajax({ 
 	    	type:"POST",
 			url : "/rate/add",
 			ContentType:"application/json ;charset=UTF-8",
 			crossOrigin:true,
 			dataType:"json",
 			headers: {
 				'Accept': 'application/json',
 				'Content-Type': 'application/json'
 				},
 			data:this.JSON.stringify(model),
 			success:function(data){
 				window.location.replace('review.html');
 			}
 			,error:function(){alert("Error");}
 	    });  
		}
  </script>
<script>
const inputs = document.querySelectorAll('.form-control input');
const labels = document.querySelectorAll('.form-control label');
labels.forEach(label => {
	label.innerHTML = label.innerText
		.split('')
		.map((letter, idx) => `<span style="
				transition-delay: ${idx * 50}ms
			">${letter}</span>`)
		.join('');
});

// SOCIAL PANEL JS
const floating_btn = document.querySelector('.floating-btn');
const close_btn = document.querySelector('.close-btn');
const social_panel_container = document.querySelector('.social-panel-container');

floating_btn.addEventListener('click', () => {
	social_panel_container.classList.toggle('visible')
});

close_btn.addEventListener('click', () => {
	social_panel_container.classList.remove('visible')
});
</script>
  </body>
  
</html>